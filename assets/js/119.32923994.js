(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{505:function(e,s,t){"use strict";t.r(s);var a=t(54),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker Compose")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),t("OutboundLink")],1),e._v(", or docker-compose, Compose, is a tool for defining and running multi-container Docker applications.")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#install"}},[e._v("Install")])]),t("li",[t("a",{attrs:{href:"#commands"}},[e._v("Commands")])]),t("li",[t("a",{attrs:{href:"#composefile"}},[e._v("Composefile")])]),t("li",[t("a",{attrs:{href:"#caveats"}},[e._v("Caveats")])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[e._v("#")]),e._v(" Install")]),e._v(" "),t("p",[e._v("For macOS users,")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("$ brew "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-compose\n")])])]),t("h2",{attrs:{id:"commands"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[e._v("#")]),e._v(" Commands")]),e._v(" "),t("p",[e._v("Below commands covers 95% cases.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("$ docker-compose up\n$ docker-compose up -d "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# run as daemons")]),e._v("\n$ docker-compose up -d some-service\n\n$ docker-compose stop\n$ docker-compose down\n\n$ docker-compose restart some-service\n\n$ docker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# check all running processes in container")]),e._v("\n\n$ docker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" some-service\n$ docker-compose build some-service\n\n$ docker-compose logs\n$ docker-compose logs -f "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# like `tail -f`")]),e._v("\n$ docker-compose logs -f --tail"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("100")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# only concern latest logs")]),e._v("\n\n$ docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it some-service "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n")])])]),t("p",[e._v("Any further usage can refer to "),t("a",{attrs:{href:"https://docs.docker.com/compose/reference/overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Overview of docker-compose CLI"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"composefile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#composefile"}},[e._v("#")]),e._v(" Composefile")]),e._v(" "),t("p",[e._v("Place a "),t("code",[e._v("docker-compose.yaml")]),e._v(" in project root as a normal convention.")]),e._v(" "),t("p",[e._v("The content of minimal "),t("code",[e._v("docker-compose.yaml")]),e._v(" example:")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" redis\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("web")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" .\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dockerfile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Dockerfile\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"8000:8000"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('".:/app"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"./data:/data"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" DEBUG=false\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /app/bin/entrypoint.sh\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" redis\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("depends_on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" redis\n\n")])])]),t("h2",{attrs:{id:"caveats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#caveats"}},[e._v("#")]),e._v(" Caveats")]),e._v(" "),t("p",[e._v("It's probably the top#1 choice for local application development.")]),e._v(" "),t("p",[e._v("In general, you need both "),t("code",[e._v("Dockerfile")]),e._v(" and "),t("code",[e._v("docker-compose.yaml")]),e._v(" files simultaneously. "),t("a",{attrs:{href:"https://stackoverflow.com/questions/29480099/docker-compose-vs-dockerfile-which-is-better",target:"_blank",rel:"noopener noreferrer"}},[e._v("^caveat-1"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("It's okay to have "),t("code",[e._v("runit")]),e._v(" / "),t("code",[e._v("supervisor")]),e._v(" installed in Docker image when doing local development, in which you can have multiple processes running.")]),e._v(" "),t("p",[e._v("It's recommended mounting "),t("code",[e._v("volumes")]),e._v(" for data persistence, especially like MySQL, etc. The data is preserved even you type "),t("code",[e._v("docker-compose stop")]),e._v(".")]),e._v(" "),t("p",[e._v("Depending on the case, it can be used in production only when you have one server and have no SLA requirement. "),t("a",{attrs:{href:"https://docs.docker.com/compose/production/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Use Compose in production"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("People mix Compose with Kubernetes, so there comes "),t("a",{attrs:{href:"https://kompose.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kompose"),t("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);s.default=n.exports}}]);